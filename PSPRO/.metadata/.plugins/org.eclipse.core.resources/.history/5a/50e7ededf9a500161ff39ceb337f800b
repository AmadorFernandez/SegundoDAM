import java.util.Queue;

public class SuperModerno {

	
	private Caja[] cajas;
	private double resultado;
	private static int nClientes;
	private int clientesEnCola;
	private int pos;
	
	public SuperModerno(int nCjas, int nClientes){
		
		this.cajas = new Caja[nCjas];
		SuperModerno.nClientes = nClientes;
		
		
		for (int i = 0; i < cajas.length; i++) {
			
			this.cajas[i] = new Caja(i+1);
						
		}
	}
	
	public double getResultado(){
		
		return this.resultado;
	}
	
	public synchronized void cobrar(double dinero, Caja caja){
		
		caja.setOcupada(false);
		SuperModerno.nClientes--;
		this.resultado += dinero;
		System.out.println("La caja "+caja.getNCaja()+" queda libre");
		notify();
	}
	
	public synchronized void encolar(Cliente cliente){
		
		int cont = 0;
		
		while(cont == 0){
		
			for (pos = 0; pos < cajas.length; pos++) {
			
				if(!cajas[pos].isOcupada()){
					System.out.println("La caja "+cajas[pos].getNCaja()+" esta atendiendo al cliente "+cliente.getNcliente());
					cajas[pos].setOcupada(true);
					cont++;
					break;
				}
			}
			
			if(cont == 0){
				
				try {
					System.out.println("El cliente "+cliente.getNcliente()+" se pone a la cola");
					wait();
				} catch (InterruptedException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}else{
				
				cliente.setCaja(cajas[pos]);
			}
				
			 		
		}
	}
		
}
