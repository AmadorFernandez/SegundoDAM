
import java.util.Random;

public class Cliente extends Thread  {

	private int id;
	private Random alea;
	private boolean atendido;
	private double gastado;
	
	
	public void setId(int value){
		
		this.id = value;
	}
	
	public int getIdCliente(){
		
		return this.id;
	}
	
	
	
	
	public void setAtendido(boolean value){
		
		
		this.atendido = value;
		
	}
	
	
	
	public boolean isAtendido(){
		
		return atendido;
	}
	
	public double getGastado(){
		
		return this.gastado;
	}
	
	
	
	public Cliente(int id){
		
		
		this.alea = new Random();
		this.atendido = false;
		this.id = id;
		this.gastado = 0;
	}
	
	private void comprar() {
		
		try {
			Thread.sleep(alea.nextInt(5000));
		} catch (InterruptedException e) {
			//???
		}
	}
	
	public void pagar(){
				
		this.gastado = alea.nextDouble() * 100;
		Supermercado.sumValor(this.gastado);
	}
	
	public void enColar(){
		
		int caja = alea.nextInt(Supermercado.cajas.length);
		
		synchronized (Supermercado.cajas) {
			
			Supermercado.cajas[caja].getCola().add(this);
			System.out.println("Cliente encolado");
		}
		
		
	}
	
	public void run(){
		
		comprar();
		enColar();
		
		if(!atendido){
		    try {
		    	
		    	synchronized(this){
		    		wait();
		    	}
				
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
		
								
	}
	
	@Override
	public boolean equals(Object obj) {
		
	     boolean resultado = false;
	     
	     if(obj != null){
	    	 
	    	 if(obj instanceof Cliente){
	    		 
	    		 resultado = ((Cliente)obj).getIdCliente()== this.id;
	    	 }
	     }
	     
	     return resultado;
	}
		
}
